<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <title>Carte des sanisettes à Paris</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-GLhlTQ8iRABdZLl6O3oVMWSktQOp6b7In1Zl3/Jr59b6EGGoI1aFkw7cmDA6j6gD" crossorigin="anonymous">
    <!-- Importation de la bibliothèque ODS pour utiliser le widget -->
    <!--<script src="https://static.opendatasoft.com/libs/ods-map/2.6.0/ods-map.min.js"></script> -->

    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@500&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@200&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Pacifico&display=swap" rel="stylesheet">
</head>
<body>
    <script>
      var latitude = "48.86071"
      var longitude = "2.34601";

      function mapEvent() {
        let param = "{'disjunctive.type':true,'disjunctive.statut':true,'disjunctive.arrondissement':true,'disjunctive.horaire':true,'disjunctive.acces_pmr':true,'disjunctive.relais_bebe':true"

        let first = true;
        Array.prototype.forEach.call(document.getElementsByClassName("api-button"), function(element) {
          if (element.checked) {
            if (first) {
              first = false;
              param += ",'refine.type':['";
              param += element.value.toUpperCase() + "'";
            } else {
              param += ",'" +element.value.toUpperCase() + "'";
            }
          }
        });
        if (!first) {
            param += "]";
        }

        dep = []
        Array.prototype.forEach.call(document.getElementsByClassName("api-button-rad"), function(element) {
          if (element.checked) {
            dep.push(element.value);
          }
        });
        if (dep.length > 0) {
          first = true;
            dep.forEach((element) => {
              if (first) {
              first = false;
              param += ",'refine.arrondissement':['" + element + "'";
            } else {
              param += ",'" + element + "'";
            }
          });
          param += "]";
        }

        dep = []
        Array.prototype.forEach.call(document.getElementsByClassName("api-button-time"), function(element) {
          if (element.checked) {
            dep.push(element.value);
          }
        });
        if (dep.length > 0) {
          first = true;
            dep.forEach((element) => {
              if (first) {
              first = false;
              param += ",'refine.horaire':['" + element + "'";
            } else {
              param += ",'" + element + "'";
            }
          });
          param += "]";
        }

        param += "}";

        document.getElementById("map").src = "map.php?parameters=" + param + "&location=15," + latitude + "," + longitude
      }
    </script>

    <h1 class="visually-hidden">Sidebars examples</h1>

    <div class="container-fluid" style="padding-left: 0;">
            <div class="col-3 d-none d-sm-block p-0 bg-dark p-3 min-vh-100" style="overflow: auto;">
                <h3 style="color: #f3f3f3; text-align: center;">Titanic</h3>
                <ul class="list-group mt-4">
                  <!--TYPE-->
                   
                    <li class="list-unstyled border-0 p-2">
                      <h5>Type</h5>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button" type="checkbox" value="Lavatory" id="Lavatory">
                        <label class="form-check-label text-light" for="Lavatory">
                          Lavatory
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button" type="checkbox" value="Sanisette" id="Sanisettes">
                        <label class="form-check-label text-light" for="Sanisettes">
                          Sanisettes
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button" type="checkbox" value="Toilettes" id="Toilettes">
                        <label class="form-check-label text-light" for="Toilettes">
                          Toilettes
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button" type="checkbox" value="Urinoir" id="Urinoir">
                        <label class="form-check-label text-light" for="Urinoir">
                          Urinoir
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button" type="checkbox" value="Urinoir femme" id="Urinoir femme">
                        <label class="form-check-label text-light" for="Urinoir femme">
                          Urinoir femme
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button" type="checkbox" value="Wc publics permanents" id="Wc publics permanents">
                        <label class="form-check-label text-light" for="Wc publics permanents">
                          Wc publics Permanents
                        </label>
                      </div>         
                    </li>
                    <!--ARRONDISSEMENT-->
                    <li class="list-unstyled border-0 p-2">
                      <h5>Arrondissement</h5> 
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75001" id="75001">
                        <label class="form-check-label text-light" for="75001">
                          75001
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75002" id="75002">
                        <label class="form-check-label text-light" for="75002">
                          75002
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75003" id="75003">
                        <label class="form-check-label text-light" for="75003">
                          75003
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75004" id="75004">
                        <label class="form-check-label text-light" for="75004">
                          75004
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75005" id="75005">
                        <label class="form-check-label text-light" for="75005">
                          75005
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75006" id="75006">
                        <label class="form-check-label text-light" for="75006">
                          75006
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75007" id="75007">
                        <label class="form-check-label text-light" for="75007">
                          75007
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75008" id="75008">
                        <label class="form-check-label text-light" for="75008">
                          75008
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75009" id="75009">
                        <label class="form-check-label text-light" for="75009">
                          75009
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75010" id="75010">
                        <label class="form-check-label text-light" for="75010">
                          75010
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75011" id="75011">
                        <label class="form-check-label text-light" for="75011">
                          75011
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75012" id="75012">
                        <label class="form-check-label text-light" for="75012">
                          75012
                        </label>
                      </div> 
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75013" id="75013">
                        <label class="form-check-label text-light" for="75013">
                          75013
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75014" id="75014">
                        <label class="form-check-label text-light" for="75014">
                          75014
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75015" id="75015">
                        <label class="form-check-label text-light" for="75015">
                          75015
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75016" id="75016">
                        <label class="form-check-label text-light" for="75016">
                          75016
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75017" id="75017">
                        <label class="form-check-label text-light" for="75017">
                          75017
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75018" id="75018">
                        <label class="form-check-label text-light" for="75018">
                          75018
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75019" id="75019">
                        <label class="form-check-label text-light" for="75019">
                          75019
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-rad" type="checkbox" value="75020" id="75020">
                        <label class="form-check-label text-light" for="75020">
                          75020
                        </label>
                      </div>                  
                    </li>
                    <!--Horaire-->
                    <li class="list-unstyled border-0 p-2">
                      <h5>Horaire</h5> 
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="10h à 22h" id="10h à 22h">
                        <label class="form-check-label text-light" for="10h à 22h">
                          10h à 22h
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="19h - 7h" id="19h - 7h">
                        <label class="form-check-label text-light" for="19h - 7h">
                          19h - 7h
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="24 h / 24" id="24 h / 24">
                        <label class="form-check-label text-light" for="24 h / 24">
                          24 h /24
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="24h/24" id="24h/24">
                        <label class="form-check-label text-light" for="24h/24">
                          24h24
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="6 h - 1 h" id="6 h - 1 h">
                        <label class="form-check-label text-light" for="6 h - 1 h">
                          6 h - 1 h
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="6 h - 22 h" id="6 h - 22 h">
                        <label class="form-check-label text-light" for="6 h - 22 h">
                          6 h - 22 h
                        </label>
                      </div> 
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-button-time" type="checkbox" value="Voir fiche équipement" id="Voir fiche équipement">
                        <label class="form-check-label text-light" for="Voir fiche équipement">
                          Voir fiche équipement
                        </label>
                      </div>         
                    </li>
                    <!--ACCES PMR-->
                    <li class="list-unstyled border-0 p-2">
                      <h5>Acces PMR</h5>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-radio" type="radio" name="flexRadioDefault" id="flexRadioDefaultoui">
                        <label class="form-check-label text-light" for="flexRadioDefaultoui">
                          Oui
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-radio" type="radio" name="flexRadioDefault" id="flexRadioDefaultnon">
                        <label class="form-check-label text-light" for="flexRadioDefaultnon">
                          Non
                        </label>
                      </div>
                    </li>
                    <!-- RELAIS BEBE -->
                    <li class="list-unstyled border-0 p-2">
                      <h5>Relais BEBE</h5>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-radio" type="radio" name="flexRadioDefault2" id="flexRadioDefault2">
                        <label class="form-check-label text-light" for="flexRadioDefault2">
                          Oui
                        </label>
                      </div>
                      <div class="form-check" onclick="mapEvent()">
                        <input class="form-check-input api-radio" type="radio" name="flexRadioDefault2" id="flexRadioDefault2non">
                        <label class="form-check-label text-light" for="flexRadioDefault2non">
                          Non
                        </label>
                      </div>
                    </li>
                </ul>
            </div>
            <div class="col-3 d-none d-sm-block p-0 p-3" style="background-color: #ffcd38;">
              <footer style="display:flex;">
                <div><a href="https://www.linkedin.com/in/pierre-dumas-18559521b/">Pierre Alexandre Dumas</a></div>
                <div><a href="https://www.linkedin.com/in/anthony-bruneaux-6404791bb/">Anthony Bruneaux</a></div>
                <div><a href="https://www.linkedin.com/in/rapha%C3%ABl-lemaire-303487220/">Raphael Lemaire</a></div>
                <div><a href="https://www.linkedin.com/in/valentin-charbonneau/">Valentin Charbonneau</a></div>
              </footer>
            </div>
        </div>
    </div>
    <style>
        #map {
            position: fixed;
            top: 0;
            right: 0;
            width: 75%;
            height: 100%;
            margin: 0;
        }
    </style>
    <iframe id="map" src="map.php?parameters={'disjunctive.type':true,'disjunctive.statut':true,'disjunctive.arrondissement':true,'disjunctive.horaire':true,'disjunctive.acces_pmr':true,'disjunctive.relais_bebe':true}&location=15,48.85987,2.34518" frameborder="0"></iframe>

        
    <!-- Optional JavaScript -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>
    <script>
      if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(function(position) { 
              latitude = position.coords.latitude;
              longitude = position.coords.longitude;
              document.getElementById("map").src = "map.php?parameters={'disjunctive.type':true,'disjunctive.statut':true,'disjunctive.arrondissement':true,'disjunctive.horaire':true,'disjunctive.acces_pmr':true,'disjunctive.relais_bebe':true}&location=15," + latitude + "," + longitude
          });
      }
  </script>
  </body>
</html>
